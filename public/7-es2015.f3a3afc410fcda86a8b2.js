(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Yj9t:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),i=n("tyNb"),a=n("6Ak/"),o=n("LMZs"),l=n("Ouqs"),s=n("8kSs"),d=n("fXoL"),c=n("aceb"),u=n("3Pt+");const m=["registerForm"];function g(e,t){1&e&&d["\u0275\u0275elementContainer"](0)}function p(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p",23),d["\u0275\u0275text"](1," Username required! "),d["\u0275\u0275elementEnd"]())}function h(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p",23),d["\u0275\u0275text"](1," Password required! "),d["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-card-body"),d["\u0275\u0275elementStart"](1,"div",4),d["\u0275\u0275elementStart"](2,"div",5),d["\u0275\u0275elementStart"](3,"div",6),d["\u0275\u0275element"](4,"img",7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"form",8,9),d["\u0275\u0275listener"]("ngSubmit",(function(){d["\u0275\u0275restoreView"](e);const t=d["\u0275\u0275reference"](6);return d["\u0275\u0275nextContext"]().onLogin(t)})),d["\u0275\u0275elementStart"](7,"div",10),d["\u0275\u0275elementStart"](8,"label",11),d["\u0275\u0275text"](9,"Username"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"input",12,13),d["\u0275\u0275listener"]("ngModelChange",(function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().user.email=t})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](12,p,2,0,"p",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"div",15),d["\u0275\u0275elementStart"](14,"span",16),d["\u0275\u0275elementStart"](15,"label",17),d["\u0275\u0275text"](16," Password "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"input",18,19),d["\u0275\u0275listener"]("ngModelChange",(function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().user.password=t})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](19,h,2,0,"p",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](20,"br"),d["\u0275\u0275elementStart"](21,"div",15),d["\u0275\u0275elementStart"](22,"button",20),d["\u0275\u0275text"](23," Sign in "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](24,"div",21),d["\u0275\u0275elementStart"](25,"p",22),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().handleForgot()})),d["\u0275\u0275text"](26," Forgot your password? "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){const e=d["\u0275\u0275reference"](6),t=d["\u0275\u0275reference"](11),n=d["\u0275\u0275reference"](18),r=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](10),d["\u0275\u0275property"]("ngModel",r.user.email),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.invalid&&(t.dirty||t.touched)),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngModel",r.user.password),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",n.invalid&&(n.dirty||n.touched)),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("disabled",!e.form.valid)("status",e.form.valid?r.primary:r.primary-r.transparent)}}const f=["registerForm"];function b(e,t){1&e&&d["\u0275\u0275elementContainer"](0)}function S(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"p",19),d["\u0275\u0275text"](1," Email required! "),d["\u0275\u0275elementEnd"]())}function w(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"nb-card-header"),d["\u0275\u0275elementStart"](1,"nb-icon",4),d["\u0275\u0275listener"]("click",(function(){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().handleLogin()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](2,"nb-card-body"),d["\u0275\u0275elementStart"](3,"div",5),d["\u0275\u0275elementStart"](4,"div",6),d["\u0275\u0275elementStart"](5,"div",7),d["\u0275\u0275elementStart"](6,"h2",8),d["\u0275\u0275text"](7," Forgot your password? "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"p",9),d["\u0275\u0275text"](9," Enter your email address below, an we\u2019ll email Instructions for setting a new one. "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"form",10,11),d["\u0275\u0275listener"]("ngSubmit",(function(){d["\u0275\u0275restoreView"](e);const t=d["\u0275\u0275reference"](11);return d["\u0275\u0275nextContext"]().onForgot(t)})),d["\u0275\u0275elementStart"](12,"div",12),d["\u0275\u0275elementStart"](13,"label",13),d["\u0275\u0275text"](14,"Email"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"input",14,15),d["\u0275\u0275listener"]("ngModelChange",(function(t){return d["\u0275\u0275restoreView"](e),d["\u0275\u0275nextContext"]().user.email=t})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](17,S,2,0,"p",16),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](18,"br"),d["\u0275\u0275elementStart"](19,"div",17),d["\u0275\u0275elementStart"](20,"button",18),d["\u0275\u0275text"](21," Send "),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){const e=d["\u0275\u0275reference"](11),t=d["\u0275\u0275reference"](16),n=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](15),d["\u0275\u0275property"]("ngModel",n.user.email),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.invalid&&(t.dirty||t.touched)),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("disabled",!e.form.valid)("status",e.form.valid?n.primary:n.primary-n.transparent)}}const y=[{path:"",component:(()=>{class e{constructor(e,t,n,r,i){this.authService=e,this.mainService=t,this.navigationService=n,this.spinnerService=r,this.alertService=i,this.oculto=!0,this.user={},this.cargando=!1,this.API_AUTH="users",this.subscriptions=[]}ngOnInit(){const e=JSON.parse(localStorage.getItem("usuario"));e&&("Administrador"==e.tipo?this.navigationService.routerNavigateTo({path:"index/dashboard"}):"Advisor"==e.tipo&&this.navigationService.routerNavigateTo({path:"index/aplicaciones"}))}showPassword(){this.oculto=!this.oculto}handleRegister(){this.navigationService.routerNavigateTo({path:"/login/register"})}handleForgot(){this.navigationService.routerNavigateTo({path:"/login/forgot"})}handleLogin(){this.navigationService.routerNavigateTo({path:"/login"})}onLogin({value:e,valid:t}){e&&t?(this.allObervable=this.authService.authenticateUser({email:e.email,password:e.password}),this.allObervable.subscribe(e=>{e?e.errors||!e.success?this.alertService.handleError({error:e.msg||e.message||e}):e.user?(this.spinnerService.load(),this.authService.storeUserData(e.token,e.user),"Administrador"==e.user.tipo?this.navigationService.routerNavigateTo({path:"index/dashboard"}):"Advisor"==e.user.tipo&&this.navigationService.routerNavigateTo({path:"index/aplicaciones"}),this.registerForm&&this.registerForm.reset()):this.alertService.handleError({error:"No autorizado"}):this.alertService.handleResponseNull()})):this.alertService.showToastr({title:"Faltan campos por llenar.",status:"warning"})}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](a.a),d["\u0275\u0275directiveInject"](o.a),d["\u0275\u0275directiveInject"](l.a),d["\u0275\u0275directiveInject"](c.nc),d["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-login"]],viewQuery:function(e,t){var n;1&e&&d["\u0275\u0275viewQuery"](m,!0),2&e&&d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.registerForm=n.first)},decls:6,vars:1,consts:[["windowMode",""],["size","xlarge",1,"card-login"],[4,"ngTemplateOutlet"],["templateLogin",""],[1,"d-flex","justify-content-center"],[1,"div-login","p-2"],[1,"text-center"],["src","./assets/images/logo.png","alt","Logo U360","height","200px"],["novalidate","","aria-labelledby","title",1,"ng-pristine","ng-invalid","ng-touched",2,"margin-top","4rem",3,"ngSubmit"],["registerForm","ngForm"],[1,"form-control-group"],["for","input-email",1,"label"],["nbinput","","fullwidth","","name","email","id","input-email","pattern",".+@.+\\..+","placeholder","email@example.com","fieldsize","large","autofocus","","required","","aria-invalid","true",1,"input-full-width","size-large","status-basic","shape-rectangle","ng-pristine","ng-invalid","nb-transition","ng-touched",3,"ngModel","ngModelChange"],["email","ngModel"],["class","caption status-danger ng-star-inserted",4,"ngIf"],[1,"form-control-group",2,"margin-top","1rem"],[1,"label-with-link"],["for","input-password",1,"label"],["nbinput","","fullwidth","","name","password","type","password","id","input-password","placeholder","Password","fieldsize","large","required","",1,"input-full-width","size-large","status-basic","shape-rectangle","ng-untouched","ng-pristine","ng-invalid","nb-transition",3,"ngModel","ngModelChange"],["password","ngModel"],["nbButton","","nbbutton","","fullwidth","","size","large","_nghost-dyt-c86","","aria-disabled","true","tabindex","-1","type","submit",1,"appearance-filled","full-width","size-large","status-primary","shape-rectangle","btn-disabled","nb-transition",3,"disabled","status"],[1,"form-control-group","text-center",2,"margin-top","10vh"],[1,"forgot",2,"cursor","pointer",3,"click"],[1,"caption","status-danger","ng-star-inserted"]],template:function(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-layout",0),d["\u0275\u0275elementStart"](1,"nb-layout-column"),d["\u0275\u0275elementStart"](2,"nb-card",1),d["\u0275\u0275template"](3,g,1,0,"ng-container",2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](4,v,27,6,"ng-template",null,3,d["\u0275\u0275templateRefExtractor"])),2&e){const e=d["\u0275\u0275reference"](5);d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngTemplateOutlet",e)}},directives:[c.ub,c.tb,c.z,r.B,c.y,u.H,u.s,u.t,u.c,u.y,u.C,u.r,u.u,r.u,c.r],styles:["h1[_ngcontent-%COMP%]{margin-bottom:0!important}.centrado[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.forgot[_ngcontent-%COMP%]{color:#36f;font-weight:bolder}.field-icon[_ngcontent-%COMP%]{float:right;margin-top:-30px;margin-right:20px;position:relative;z-index:2}.card-login[_ngcontent-%COMP%]{min-height:90vh}.div-login[_ngcontent-%COMP%]{width:560px;margin-top:5vh}"]}),e})()},{path:"forgot",component:(()=>{class e{constructor(e,t,n,r){this.mainService=e,this.alertService=t,this.navigateService=n,this.authService=r,this.user={},this.cargando=!1,this.API_AUTH="users",this.subscriptions=[]}ngOnInit(){}onForgot({value:e,valid:t}){e&&t?(this.allObervable=this.authService.forgot(e.email),this.allObervable.subscribe(e=>{console.log(e),e?e.errors||!e.success?this.alertService.handleError({error:"\xa1Este correo no est\xe1 registrado!"}):this.alertService.handleSuccess({title:"Se han enviado las instrucciones a tu email."}):this.alertService.handleError({error:"Ha ocurrido un error al procesar tu solicitud."})})):this.alertService.handleError({error:"Faltan campos por llenar."})}handleLogin(){this.navigateService.routerNavigateTo({path:"/login"})}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](o.a),d["\u0275\u0275directiveInject"](s.a),d["\u0275\u0275directiveInject"](l.a),d["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["ngx-forgot"]],viewQuery:function(e,t){var n;1&e&&d["\u0275\u0275viewQuery"](f,!0),2&e&&d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.registerForm=n.first)},decls:6,vars:1,consts:[["windowMode",""],["size","xlarge",2,"min-height","90vh"],[4,"ngTemplateOutlet"],["templateLogin",""],["icon","arrow-back","status","primary",2,"cursor","pointer","font-size","34px",3,"click"],[1,"d-flex","justify-content-center"],[1,"p-2",2,"width","560px"],[1,"text-center"],["id","title",1,"title",2,"color","rgb(120, 120, 120)"],[1,"sub-title",2,"margin","0px !important"],["novalidate","","aria-labelledby","title",1,"ng-pristine","ng-invalid","ng-touched",2,"margin-top","4rem",3,"ngSubmit"],["registerForm","ngForm"],[1,"form-control-group"],["for","input-email",1,"label"],["nbinput","","fullwidth","","name","email","id","input-email","pattern",".+@.+\\..+","placeholder","email@example.com","fieldsize","large","autofocus","","required","","aria-invalid","true",1,"input-full-width","size-large","status-basic","shape-rectangle","ng-pristine","ng-invalid","nb-transition","ng-touched",3,"ngModel","ngModelChange"],["email","ngModel"],["class","caption status-danger ng-star-inserted",4,"ngIf"],[1,"form-control-group",2,"margin-top","1rem"],["nbButton","","nbbutton","","fullwidth","","size","large","_nghost-dyt-c86","","aria-disabled","true","tabindex","-1","type","submit",1,"appearance-filled","full-width","size-large","status-primary","shape-rectangle","btn-disabled","nb-transition",3,"disabled","status"],[1,"caption","status-danger","ng-star-inserted"]],template:function(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"nb-layout",0),d["\u0275\u0275elementStart"](1,"nb-layout-column"),d["\u0275\u0275elementStart"](2,"nb-card",1),d["\u0275\u0275template"](3,b,1,0,"ng-container",2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](4,w,22,4,"ng-template",null,3,d["\u0275\u0275templateRefExtractor"])),2&e){const e=d["\u0275\u0275reference"](5);d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("ngTemplateOutlet",e)}},directives:[c.ub,c.tb,c.z,r.B,c.C,c.nb,c.y,u.H,u.s,u.t,u.c,u.y,u.C,u.r,u.u,r.u,c.r],styles:["h1[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),e})()},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login"}];let x=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.g.forChild(y)],i.g]}),e})();var E=n("qlzE"),C=n("tk/3"),M=n("tR1z"),I=n("RS3s"),z=n("z+eI"),O=n("3nuN"),T=n("7pIB"),j=n("GU7I");n.d(t,"AuthModule",(function(){return F}));let F=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[c.nc],imports:[[r.c,u.B,u.l,x,E.HttpModule,C.b,r.c,c.zb,c.Hb,c.Wc,c.m,c.Xb,c.ec,c.T,c.s,c.ac,c.pb,M.a,O.d.forRoot(j,{cloud_name:"dkhfz1aco"}),T.c,c.Ac.forRoot(),c.Y.forChild(),c.X.forRoot(),c.zb,c.ec,c.m,c.D,c.sb,c.s,c.ac,c.xc,c.Q,c.u,I.c,c.qc,c.mc,c.w,c.Cb,c.j,c.q,c.o,c.Qc,c.Wc,c.T,z.ChartModule]]}),e})()}}]);